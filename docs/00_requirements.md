# 問題集アプリ仕様書

## 1. 概要

資格取得を目的とした社内勉強会で配布する問題集アプリケーションのテンプレートを開発する。
既存の PowerPoint 形式の問題集を Web アプリケーション化し、社内メンバーが効率的に学習できる環境を提供する。

## 2. システム要件

### 2.1 基本要件

- **アプリケーション形式**: Single Page Application
- **ホスティング**: GitHub Pages
- **アクセス制御**: Organization 内部にのみ公開
- **対象デバイス**: 主に社用 iPhone での利用を想定

**ユーザー受入判定条件**:
- [ ] GitHub Pages 上でアプリケーションが正常に動作する
- [ ] Organization 外からのアクセスが制限されている
- [ ] iPhone Safari でレスポンシブ表示が適切に動作する

### 2.2 データ要件

- **問題データ形式**: YAML
- **データ構造**: カテゴリ別に問題を分類
- **問題形式**: 選択肢式（単一選択・複数選択）
- **解説**: Markdown 形式での解説文をサポート

**ユーザー受入判定条件**:
- [ ] YAML 形式の問題データが正常に読み込まれる
- [ ] Markdown 形式の解説文が適切にレンダリングされる
- [ ] 外部リンクが正常に動作する

## 3. 機能要件

### 3.1 基本機能

#### 3.1.1 問題表示・回答機能

**機能概要**: ユーザーが問題を閲覧し、選択肢から回答を選択できる

**詳細仕様**:
- カテゴリ別の問題一覧表示
- 問題文と選択肢の表示
- 単一選択・複数選択への対応
- 回答選択のUI提供

**ユーザー受入判定条件**:
- [ ] カテゴリ一覧から特定カテゴリを選択できる
- [ ] 問題文と選択肢が読みやすく表示される
- [ ] 単一選択問題で1つの選択肢を選べる
- [ ] 複数選択問題で複数の選択肢を選べる
- [ ] 選択状態が視覚的に分かりやすく表示される

#### 3.1.2 即時フィードバック機能

**機能概要**: 1問回答するごとに、即座に正解・不正解と解説を表示する

**詳細仕様**:
- 回答選択後の即時採点
- 正解・不正解の表示
- 正解選択肢のハイライト表示
- 解説文の即時表示
- 次の問題への移行UI

**ユーザー受入判定条件**:
- [ ] 回答選択と同時に正解・不正解が表示される
- [ ] 正解の選択肢が明確にハイライトされる
- [ ] ユーザーの選択した不正解選択肢も識別できる
- [ ] 解説文が即座に表示される
- [ ] 解説内の Markdown が適切にレンダリングされる
- [ ] 「次の問題へ」ボタンまたは類似のUIが提供される

#### 3.1.3 総合結果表示機能

**機能概要**: 全問題回答後に総合的な結果を表示する

**詳細仕様**:
- 総合正答率の計算・表示
- カテゴリ別正答率の表示（該当する場合）
- 正解・不正解問題の一覧表示
- 復習対象問題の案内

**ユーザー受入判定条件**:
- [ ] 全問題回答後に結果画面が表示される
- [ ] 総合正答率が正確に計算・表示される
- [ ] 問題ごとの正解・不正解状況が一覧できる
- [ ] 間違えた問題への復習リンクが提供される

### 3.2 進捗管理機能

#### 3.2.1 回答継続機能

**機能概要**: アプリを途中で離れても、続きから回答を再開できる

**詳細仕様**:
- 回答進捗の自動保存
- ブラウザを閉じても状態を保持
- 途中から再開時の問題位置復元

**ユーザー受入判定条件**:
- [ ] 回答途中でブラウザを閉じても進捗が保存される
- [ ] 再度アクセス時に続きから開始できる
- [ ] 既に回答した問題の選択状態が復元される

#### 3.2.2 間違えた問題の復習機能

**機能概要**: 過去に間違えた問題のみを抽出して再挑戦できる

**詳細仕様**:
- 不正解問題の記録・蓄積
- 復習モードでの問題表示
- 復習対象問題の絞り込み

**ユーザー受入判定条件**:
- [ ] 過去に間違えた問題が記録される
- [ ] 「復習モード」で間違えた問題のみが表示される
- [ ] 復習で正解した問題は復習対象から除外される

### 3.3 カテゴリ機能

#### 3.3.1 特定カテゴリ学習機能

**機能概要**: 特定のカテゴリの問題のみを選択して学習できる

**詳細仕様**:
- カテゴリ別問題フィルタリング
- カテゴリ単位での進捗管理
- カテゴリ別結果表示

**ユーザー受入判定条件**:
- [ ] カテゴリ一覧が表示される
- [ ] 特定カテゴリを選択して問題に取り組める
- [ ] カテゴリ別の進捗状況が分かる

### 3.4 共有機能

#### 3.4.1 問題シェア機能

**機能概要**: URL で特定の問題を一意に特定し、他者と共有できる

**詳細仕様**:
- 問題固有のURL生成
- URL経由での直接問題アクセス
- 解説文の誤りを指摘する際の活用を想定

**ユーザー受入判定条件**:
- [ ] 各問題に一意のURLが生成される
- [ ] 共有URLから直接その問題にアクセスできる
- [ ] URL内のパラメータが変更されても適切にエラーハンドリングされる

## 4. データ仕様

### 4.1 YAML スキーマ定義

```yaml
# メタデータ
metadata:
  version: "1.0.0"                    # データ形式バージョン
  title: "問題集タイトル"              # 問題集名
  lastUpdated: "2025-07-19"           # 最終更新日（YYYY-MM-DD）
  totalQuestions: 150                  # 総問題数
  description: "問題集の説明"          # 説明文（オプション）

# カテゴリ配列
categories:
  - id: "category-id"                  # カテゴリ識別子（URL対応）
    name: "カテゴリ表示名"             # 画面表示用名称
    description: "カテゴリ説明"        # カテゴリの説明
    order: 1                           # 表示順序
    questions:                         # 問題配列
      - type: "single"                 # 問題タイプ（single|multiple）
        question: |                    # 問題文（Markdownサポート）
          問題文をここに記載
        options:                       # 選択肢配列
          - "選択肢1"
          - "選択肢2"
          - "選択肢3"
          - "選択肢4"
        correct: [1]                   # 正解のインデックス配列（0-based）
        explanation: |                 # 解説文（Markdown サポート）
          解説文をここに記載
          [リンク](https://example.com)も使用可能
```

**データ制約**:
- `categories[].id`: 英数字とハイフンのみ使用
- `questions[].type`: "single" または "multiple"
- `questions[].correct`: options配列のインデックス範囲内
- `questions[].question`, `questions[].explanation`: Markdown記法サポート

### 4.2 URL仕様

**基本URL構造** (Hash routing対応):
```
/#/                                      # トップページ（カテゴリ一覧）
/#/category/{categoryId}                 # カテゴリ別問題一覧
/#/quiz/{categoryId}                     # クイズ実行画面
/#/quiz/{categoryId}/result              # 結果画面
/#/question/{categoryId}/{questionIndex} # 個別問題シェア
/#/review                                # 間違えた問題の復習
```

**Hash routing採用理由**:
GitHub Pages でのSPAデプロイメント対応のため、Hash routing方式を採用。これにより追加のサーバー設定なしでクライアントサイドルーティングが実現可能。

**パラメータ仕様**:
- `{categoryId}`: categories 配列内の id 値
- `{questionIndex}`: カテゴリ内の問題インデックス（0-based）

**ユーザー受入判定条件**:
- [ ] 各URLパス（Hash routing）が正しく機能する
- [ ] 存在しない categoryId での適切なエラー表示
- [ ] 範囲外 questionIndex での適切なエラー表示
- [ ] ブラウザの戻る・進むボタンが正常に動作する

## 5. 運用要件

### 5.1 データ更新

- **更新頻度**: 四半期に一回程度
- **更新方法**: YAML ファイルの直接編集
- **問題追加**: 配列末尾への追加のみ（URL の一意性保持のため）

**ユーザー受入判定条件**:
- [ ] データ更新後、既存の進捗情報が保持される

## 6. 非機能要件

### 6.1 パフォーマンス

- モバイル端末での快適な動作
- 問題データの効率的な読み込み

### 6.2 ユーザビリティ

- iPhone Safari での操作性
- タッチ操作に適したUI

### 6.3 保守性

- 問題データの容易な編集・更新
- バージョン管理対応

**ユーザー受入判定条件**:
- [ ] 問題ページの読み込みが3秒以内に完了する
- [ ] タッチ操作で誤操作なく回答できる
- [ ] YAML 編集時の構文エラーが分かりやすく表示される
