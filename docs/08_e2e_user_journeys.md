# E2Eテスト ユーザージャーニー仕様書

## 概要

本文書は、クイズアプリケーションのE2Eテストで検証すべきユーザージャーニーを定義します。
Kent C. Doddsの「ユーザーが使うようにテストする」哲学に基づき、実際のユーザー視点でのシナリオを記述します。

## ユーザージャーニー一覧

### 1. 完全なクイズ体験（complete-quiz-journey）

**ユーザーストーリー**: 「クイズを選んで最後まで解いて結果を見る」

#### ユーザーフロー
1. **カテゴリ選択**
   - ホーム画面で利用可能なクイズカテゴリを確認
   - カテゴリの進捗状況（未開始/進行中/完了）を確認
   - 任意のカテゴリの「開始」ボタンをクリック

2. **クイズ実行**
   - 問題文と選択肢を読む
   - 回答を選択（単一選択/複数選択）
   - 「回答する」ボタンをクリック
   - 正解・不正解のフィードバックと解説を確認
   - 次の問題に進む、または結果画面へ

3. **結果確認**
   - 正解率とパフォーマンス評価を確認
   - 統計情報（正解数、不正解数、総問題数）を確認
   - 問題別の結果詳細を確認
   - 「復習する」「再挑戦」「ホームに戻る」から選択

#### テストパターン
- **全問正解パターン**: 100%の成績で「素晴らしい！」メッセージ、復習ボタンなし
- **正解・不正解混在パターン**: 50%の成績で「復習が必要です」メッセージ、復習ボタン表示

### 2. 間違えた問題の復習（review-mistakes）

**ユーザーストーリー**: 「間違えた問題を復習して理解を深める」

#### ユーザーフロー
1. **復習画面アクセス**
   - ホーム画面で「復習する」ボタンをクリック
   - 復習モード画面で復習対象の統計を確認

2. **復習実行**
   - 「復習を開始する」ボタンをクリック
   - 間違えた問題に再挑戦
   - 正解・不正解のフィードバックを確認

3. **復習結果確認**
   - 復習後の統計情報を確認
   - 正解した問題は復習リストから削除
   - 復習対象がなくなると完了メッセージ表示

#### テストパターン  
- **正解パターン**: 復習対象から問題が削除され、復習ボタンが非表示
- **不正解パターン**: 間違い回数が増加し、復習対象として残る

### 3. クイズの中断と再開（resume-quiz）

**ユーザーストーリー**: 「中断したクイズを後で続ける」

#### ユーザーフロー  
1. **クイズ開始と中断**
   - カテゴリを選択してクイズを開始
   - 途中まで問題を回答
   - 「ホーム」ボタンで中断

2. **進捗状態の確認**
   - ホーム画面で該当カテゴリが「進行中」状態になっている
   - 進捗表示（例：1/2）が正しく表示される
   - 「続きから」ボタンが表示される

3. **クイズ再開**
   - 「続きから」ボタンをクリック
   - 次の未回答問題から再開される
   - 残りの問題を完了して結果画面へ

4. **完了後の状態変化**  
   - カテゴリが「完了」状態になる
   - 「もう一度」ボタンに変更される

#### テストパターン
- **単一カテゴリ再開**: 1つのカテゴリで中断・再開
- **複数カテゴリ管理**: 複数カテゴリで独立した進捗管理
- **ブラウザセッション永続化**: リロード後も進捗が維持される

## テスト実装ガイドライン

### E2Eテストの焦点
- **ユーザー操作**: クリック、入力、ナビゲーションなど実際のユーザー行動
- **画面表示**: ユーザーに表示される情報の正確性
- **フロー完遂**: 開始から完了までの一連の流れ

### 技術的詳細の除外
- データベース・LocalStorageの内部構造
- APIレスポンスの詳細仕様  
- フロントエンドの状態管理実装

各テストの具体的な実装は `e2e/` ディレクトリ内のPlaywrightテストコードを参照してください。
